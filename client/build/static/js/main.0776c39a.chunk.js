(this["webpackJsonpplaylister-hw4"]=this["webpackJsonpplaylister-hw4"]||[]).push([[0],{127:function(e,t,r){},156:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),s=r(30),o=r.n(s),c=(r(127),r(43)),i=r(18),l=r(36),u=r(57),d=r(12),j=r(76),b=r.n(j);b.a.defaults.withCredentials=!0;var O=b.a.create({baseURL:"http://localhost:4000/auth"}),g={getLoggedIn:function(){return O.get("/loggedIn/")},registerUser:function(e,t,r,n,a){return O.post("/register/",{firstName:e,lastName:t,email:r,password:n,passwordVerify:a})},loginUser:function(e,t){return O.post("/login/",{email:e,password:t})},logoutUser:function(){return O.get("/logout/")}},p=r(2),h=Object(n.createContext)();console.log("create AuthContext: "+h);var x={GET_LOGGED_IN:"GET_LOGGED_IN",LOGIN_USER:"LOGIN_USER",LOGOUT_USER:"LOGOUT_USER",REGISTER_USER:"REGISTER_USER",LOGIN_USER_ERROR:"LOGIN_USER_ERROR",REGISTER_USER_ERROR:"REGISTER_USER_ERROR"},m="NONE",f="LOGIN_USER_ERROR",R="REGISTER_USER_ERROR";function E(e){var t=Object(n.useState)({currentModal:m,user:null,loggedIn:!1,message:null}),r=Object(d.a)(t,2),a=r[0],s=r[1],o=Object(i.f)();Object(n.useEffect)((function(){a.getLoggedIn()}),[]);var c=function(e){var t=e.type,r=e.payload;switch(t){case x.GET_LOGGED_IN:return s({user:r.user,loggedIn:r.loggedIn});case x.LOGIN_USER:return s({user:r.user,loggedIn:!0});case x.LOGOUT_USER:return s({user:null,loggedIn:!1});case x.REGISTER_USER:return s({user:r.user,loggedIn:!0});case x.LOGIN_USER_ERROR:return s({currentModal:f,user:null,loggedIn:!1,message:r.errorMessage});case x.REGISTER_USER_ERROR:return s({currentModal:R,user:null,loggedIn:!1,message:r.errorMessage});case x.HIDE_MODALS:return s({currentModal:m,user:null,loggedIn:!1});default:return a}};return a.getLoggedIn=Object(u.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getLoggedIn();case 2:200===(t=e.sent).status&&c({type:x.SET_LOGGED_IN,payload:{loggedIn:t.data.loggedIn,user:t.data.user}});case 4:case"end":return e.stop()}}),e)}))),a.registerUser=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t,r,n,a,s){var i,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.registerUser(t,r,n,a,s);case 3:200===(i=e.sent).status&&(c({type:x.REGISTER_USER,payload:{user:i.data.user}}),o.push("/")),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),u=e.t0.response.data.errorMessage,console.log(u),c({type:x.REGISTER_USER_ERROR,payload:{errorMessage:u}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n,a,s){return e.apply(this,arguments)}}(),a.loginUser=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t,r){var n,a;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.loginUser(t,r);case 3:200===(n=e.sent).status&&(c({type:x.LOGIN_USER,payload:{user:n.data.user}}),o.push("/")),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),a=e.t0.response.data.errorMessage,console.log(a),c({type:x.LOGIN_USER_ERROR,payload:{errorMessage:a}});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),a.logoutUser=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.logoutUser();case 2:200===e.sent.status&&(c({type:x.LOGOUT_USER,payload:null}),o.push("/"));case 4:case"end":return e.stop()}}),e)}))),a.getUserInitials=function(){var e="";return a.user&&(e+=a.user.firstName.charAt(0),e+=a.user.lastName.charAt(0)),console.log("user initials: "+e),e},a.isLoginModalOpen=function(){return a.currentModal===f},a.isRegisterModalOpen=function(){return a.currentModal===R},a.hideModals=function(){c({type:x.HIDE_MODALS,payload:{}})},Object(p.jsx)(h.Provider,{value:{auth:a},children:e.children})}var v=h,y=r(106),I=r(104),S=r.n(I),w=r(228),U=r(227),_=r(231),C=r(218),G=r(229),L=r(230);function N(){var e=Object(n.useContext)(v).auth,t=Object(n.useState)(null),r=Object(d.a)(t,2),a=r[0],s=r[1],o=Boolean(a),i=function(){s(null)},l="primary-search-account-menu",u=Object(p.jsxs)(y.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},id:l,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:o,onClose:i,children:[Object(p.jsx)(C.a,{onClick:i,children:Object(p.jsx)(c.b,{to:"/login/",children:"Login"})}),Object(p.jsx)(C.a,{onClick:i,children:Object(p.jsx)(c.b,{to:"/register/",children:"Create New Account"})})]}),j=Object(p.jsx)(y.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},id:l,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:o,onClose:i,children:Object(p.jsx)(C.a,{onClick:function(){i(),e.logoutUser()},children:"Logout"})}),b=u;return e.loggedIn&&(b=j),Object(p.jsxs)(U.a,{sx:{flexGrow:1},children:[Object(p.jsx)(w.a,{position:"static",children:Object(p.jsxs)(G.a,{children:[Object(p.jsx)(L.a,{variant:"h4",noWrap:!0,component:"div",sx:{display:{xs:"none",sm:"block"}},children:Object(p.jsx)(c.b,{style:{textDecoration:"none",color:"white"},to:"/",children:"\u2302"})}),Object(p.jsx)(U.a,{sx:{display:{xs:"none",md:"flex"}},children:Object(p.jsx)(_.a,{size:"large",edge:"end","aria-label":"account of current user","aria-controls":l,"aria-haspopup":"true",onClick:function(e){s(e.currentTarget)},color:"inherit",children:function(t){var r=e.getUserInitials();return console.log("userInitials: "+r),t?Object(p.jsx)("div",{children:r}):Object(p.jsx)(S.a,{})}(e.loggedIn)})})]})}),b]})}var M=function(){return Object(p.jsx)("div",{})};function k(){return Object(p.jsx)("div",{id:"splash-screen",children:"MapCraft"})}function T(){var e=Object(n.useContext)(v).auth;return console.log("HomeWrapper auth.loggedIn: "+e.loggedIn),e.loggedIn?Object(p.jsx)(M,{}):Object(p.jsx)(k,{})}var D=r(80),W=r(220);function F(e){return Object(p.jsxs)(L.a,Object(D.a)(Object(D.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",Object(p.jsx)(W.a,{color:"inherit",href:"/",children:"Playlister"})," ",(new Date).getFullYear(),"."]}))}var A=r(222),q=r(223),P=r(217),V=r(212),z=r(232),B=r(221),H=r(66),J=r.n(H),Y=r(226),K=r(213),Q=r(214),X=r(216),Z=r(233);function $(){var e=Object(n.useContext)(v).auth,t=e.message;return Object(p.jsx)(Q.a,{open:null===e.user,children:Object(p.jsx)(U.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:Object(p.jsxs)(X.a,{severity:"warning",children:[Object(p.jsx)(Z.a,{children:"Warning"}),t,Object(p.jsx)("button",{onClick:function(t){e.hideModals()},children:"CLOSE"})]})})})}function ee(){var e=Object(n.useContext)(v).auth,t="";e.isLoginModalOpen()&&(t=Object(p.jsx)($,{}));return Object(p.jsxs)(B.a,{container:!0,component:"main",sx:{height:"100vh"},children:[Object(p.jsx)(V.a,{}),Object(p.jsx)(B.a,{item:!0,xs:!1,sm:4,md:7,sx:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[50]:e.palette.grey[900]},backgroundSize:"cover",backgroundPosition:"center"}}),Object(p.jsx)(B.a,{item:!0,xs:12,sm:8,md:5,component:Y.a,elevation:6,square:!0,children:Object(p.jsxs)(U.a,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(p.jsx)(A.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(p.jsx)(J.a,{})}),Object(p.jsx)(L.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(p.jsxs)(U.a,{component:"form",noValidate:!0,onSubmit:function(t){t.preventDefault();var r=new FormData(t.currentTarget);e.loginUser(r.get("email"),r.get("password"))},sx:{mt:1},children:[Object(p.jsx)(K.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(p.jsx)(K.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(p.jsx)(z.a,{control:Object(p.jsx)(P.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(p.jsx)(q.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(p.jsxs)(B.a,{container:!0,children:[Object(p.jsx)(B.a,{item:!0,xs:!0,children:Object(p.jsx)(W.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(p.jsx)(B.a,{item:!0,children:Object(p.jsx)(W.a,{href:"#",variant:"body2",children:"Don't have an account? Sign Up"})})]}),Object(p.jsx)(F,{sx:{mt:5}})]})]})}),t]})}var te=r(224);function re(){var e=Object(n.useContext)(v).auth,t=e.message;return Object(p.jsx)(Q.a,{open:null===e.user,children:Object(p.jsx)(U.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4},children:Object(p.jsxs)(X.a,{severity:"warning",children:[Object(p.jsx)(Z.a,{children:"Warning"}),t,Object(p.jsx)("button",{onClick:function(t){e.hideModals()},children:"CLOSE"})]})})})}function ne(){var e=Object(n.useContext)(v).auth,t="";e.isRegisterModalOpen()&&(t=Object(p.jsx)(re,{}));return Object(p.jsxs)(te.a,{component:"main",maxWidth:"xs",children:[Object(p.jsx)(V.a,{}),Object(p.jsxs)(U.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(p.jsx)(A.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(p.jsx)(J.a,{})}),Object(p.jsx)(L.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(p.jsxs)(U.a,{component:"form",noValidate:!0,onSubmit:function(t){t.preventDefault();var r=new FormData(t.currentTarget);e.registerUser(r.get("firstName"),r.get("lastName"),r.get("email"),r.get("password"),r.get("passwordVerify"))},sx:{mt:3},children:[Object(p.jsxs)(B.a,{container:!0,spacing:2,children:[Object(p.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(K.a,{autoComplete:"fname",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})}),Object(p.jsx)(B.a,{item:!0,xs:12,sm:6,children:Object(p.jsx)(K.a,{required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname"})}),Object(p.jsx)(B.a,{item:!0,xs:12,children:Object(p.jsx)(K.a,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})}),Object(p.jsx)(B.a,{item:!0,xs:12,children:Object(p.jsx)(K.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password"})}),Object(p.jsx)(B.a,{item:!0,xs:12,children:Object(p.jsx)(K.a,{required:!0,fullWidth:!0,name:"passwordVerify",label:"Password Verify",type:"password",id:"passwordVerify",autoComplete:"new-password"})})]}),Object(p.jsx)(q.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(p.jsx)(B.a,{container:!0,justifyContent:"flex-end",children:Object(p.jsx)(B.a,{item:!0,children:Object(p.jsx)(W.a,{href:"/login/",variant:"body2",children:"Already have an account? Sign in"})})})]})]}),Object(p.jsx)(F,{sx:{mt:5}}),t]})}var ae=function(){return Object(p.jsx)(c.a,{children:Object(p.jsxs)(E,{children:[Object(p.jsx)(N,{}),Object(p.jsxs)(i.c,{children:[Object(p.jsx)(i.a,{path:"/",exact:!0,component:T}),Object(p.jsx)(i.a,{path:"/login/",exact:!0,component:ee}),Object(p.jsx)(i.a,{path:"/register/",exact:!0,component:ne})]})]})})},se=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,234)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),s(e),o(e)}))};o.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(ae,{})}),document.getElementById("root")),se()}},[[156,1,2]]]);
//# sourceMappingURL=main.0776c39a.chunk.js.map